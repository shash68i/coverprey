{% extends "blog/base.html" %}

{% block title %}
  Hello Posts
{% endblock %}


{% block content %}
  <div class="row">
      <div class="col-8">      
          <div class="search-create">
              <div class="img-user"><img class="img-circle" src="{{ user.profile.image.url }}"></div>
              <div class="search-box"> 
                <!-- <div class="input-group mb-3">
                  <input type="text" class="form-control" placeholder="Search..." aria-label="Recipient's username" aria-describedby="button-addon2">
                  <div class="input-group-append">
                    <button class="btn btn-outline-secondary" type="button" id="button-addon2">Search</button>
                  </div>
                </div>  -->
                <form action="{% url 'blog:post-by-search' %}" method="get">
                    <input name="q" type="text" placeholder="Search...">
                </form>
              </div>
              <div class="create-button"> <a href="{% url 'blog:post-create' %}"><button class="btn btn-secondary">Add Post</button></a></div>
          </div>
      
          {% if tag %}
            <h4 class="my-font ">Posts tagged with <span class="badge badge-info">{{ tag.name }}</span></h4>
          {% endif %}
      
          <div class="infinite-container">
            {% for post in posts %}
            <div class="post-box infinite-item">
                <div class="content-section">
                  <div class="img-section"><img class="img-circle" src="{{ post.author.profile.image.url }}"></div>
                  <div class="title-author">
                    <div class="author-publish">
                      <div > <a class="author-only-link" href="{% url 'blog:user-posts' post.author.username %}">@{{post.author}}</a></div>
                      <div class="publish-only">{{post.publish|date:"b d, Y P"}}</div>
                    </div>
                    <div class="only-title"> <a class="only-title-link" href="{% url 'blog:post-detail' post.id %}">{{post.title}}</a></div>
                    
                    <div class="tags">
                      {% for tag in post.tags.all %}
                        <a class="my-link-tag badge badge-info" href="{% url 'blog:post-list-by-tag' tag.slug %}">
                          {{ tag.name }}
                        </a>
                      <!-- {% if not forloop.last %}, {% endif %} -->
                      {% endfor %}
                    </div>
                    
                  </div>
                </div>
      
                <div class="content-body">
                {{post.body|safe|linebreaks}}
                <div>Book: {{ post.book_name }}</div>
                <div>Author: {{ post.author_name }}</div>
                </div>
      
                <div class="comment-like">
                <div class="meta-content-section">

                  <div class="btn-like">
                    Like
                  </div>
                  <!-- <div class="btn-like">Like</div>                   -->
                  <div class="btn-comment">Comment</div>
                </div>
                </div>
              </div>
            {% endfor %}
          </div>
      
          {% include "blog/pagination.html" with page=posts %}    
      </div>


      <div class="col-4">
        <h3>Popular Tags</h3>
        <h3>Popular People</h3>
      </div>
  </div>
{% endblock %}
